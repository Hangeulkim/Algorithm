#include<bits/stdc++.h>

using namespace std;

int N,M;
int input[501][501];

int block[7][4][4][2]=
{
    {
        {
            {0,0},
            {1,0},
            {2,0},
            {3,0}
        },
        {
            {0,0},
            {0,1},
            {0,2},
            {0,3}
        },
        {
            {0,0},
            {1,0},
            {2,0},
            {3,0}
        },
        {
            {0,0},
            {0,1},
            {0,2},
            {0,3}
        }
    },
    {
        {
            {0,0},
            {0,1},
            {1,0},
            {1,1}
        },
        {
            {0,0},
            {0,1},
            {1,0},
            {1,1}
        },
        {
            {0,0},
            {0,1},
            {1,0},
            {1,1}
        },
        {
            {0,0},
            {0,1},
            {1,0},
            {1,1}
        }
    },
    {
        {
            {0,0},
            {1,0},
            {2,0},
            {2,1}
        },
        {
            {1,0},
            {1,1},
            {1,2},
            {0,2}
        },
        {
            {0,0},
            {0,1},
            {1,1},
            {2,1}
        },
        {
            {0,0},
            {1,0},
            {0,1},
            {0,2}
        }
    },
    {
        {
            {0,0},
            {1,0},
            {1,1},
            {2,1}
        },
        {
            {1,0},
            {1,1},
            {0,1},
            {0,2}
        },
        {
            {0,0},
            {1,0},
            {1,1},
            {2,1}
        },
        {
            {1,0},
            {1,1},
            {0,1},
            {0,2}
        }
    },
    {
        {
            {0,0},
            {0,1},
            {0,2},
            {1,1}
        },
        {
            {0,1},
            {1,0},
            {1,1},
            {2,1}
        },
        {
            {0,0},
            {1,0},
            {2,0},
            {1,1}
        },
        {
            {0,1},
            {1,0},
            {1,1},
            {1,2}
        }
    },
    {
        {
            {0,1},
            {1,1},
            {2,0},
            {2,1}
        },
        {
            {0,0},
            {0,1},
            {0,2},
            {1,2}
        },
        {
            {0,0},
            {0,1},
            {1,0},
            {2,0}
        },
        {
            {0,0},
            {1,0},
            {1,1},
            {1,2}
        }
    },
    {
        {
            {0,1},
            {1,0},
            {1,1},
            {2,0}
        },
        {
            {0,0},
            {0,1},
            {1,1},
            {1,2}
        },
        {
            {0,1},
            {1,0},
            {1,1},
            {2,0}
        },
        {
            {0,0},
            {0,1},
            {1,1},
            {1,2}
        }
    }
};

int find(){
    int result=0;
    for(int i=1;i<=N;i++){
        for(int j=1;j<=M;j++){
            for(int n=0;n<7;n++){
                for(int c=0;c<4;c++){
                    int sum=0;
                    for(int w=0;w<4;w++){
                        int ny=i+block[n][c][w][0];
                        int nx=j+block[n][c][w][1];
                        if(ny<1||ny>N||nx<1||nx>M)
                            break;
                        sum+=input[ny][nx];
                    }
                    result=max(result,sum);
                }
            }
        }
    }
    return result;
}

int main()
{
    ios_base::sync_with_stdio(0);
    cin.tie(0);
    cout.tie(0);

    memset(input,0,sizeof(input));
    cin>>N>>M;
    for(int i=1;i<=N;i++){
        for(int j=1;j<=M;j++){
            cin>>input[i][j];
        }
    }
    cout<<find();

    return 0;
}
